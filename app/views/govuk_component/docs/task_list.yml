name: Task list
description: Numbered groups containing expanding/collapsing steps
body: |
  Task lists are designed to show a sequence of steps towards a specific goal, such as 'learning to drive'. Each group of a task list can contain one or more steps. Each step can contain one or more links to pages. User research suggested that each step should be collapsed by default so that users are not overwhelmed with information.

  If JavaScript is disabled the task list expands fully. All of the task list functionality (including the icons and aria attributes) are added using JavaScript.

  The task list is based on the accordion component in collections, but has been altered. This is for two reasons.

  - task lists are needed throughout GOV.UK and extending the accordion to be the task list would require promoting it to static, which would break integration testing
  - creating a new component allows further iteration without impacting the accordion

  Changes in the task list code that are different from the accordion:

  - functionality to 'remember' the last opened step in the URL is disabled by default
  - a step can be open by default
  - visual changes (see below)
accessibility_criteria: |
  The task list must:

  - indicate to users that each step can be expanded and collapsed
  - inform the user when a step has been expanded or collapsed
  - be usable with a keyboard
  - allow users to open or close all steps at once
  - inform the user which step a link belongs to
  - inform the user which step the current page is in, particularly where there are multiple steps in one group

  The open/close all button only needs to list the first panel id in the aria-controls attribute, rather than all of them.

  Step headings must use a button element:

  - so that steps can be toggled with the space and enter keys
  - so that steps can't be opened in a new tab or window

  When JavaScript is unavailable the task list must:

  - be fully expanded
  - not be marked as expandable
shared_accessibility_criteria:
  - link
examples:
  default:
    data:
      groups: [
        [
          {
            title: "First",
            contents: [
              {
                type: 'paragraph',
                text: 'This is a paragraph of text.'
              },
              {
                type: 'paragraph',
                text: 'This is also a paragraph of text that intentionally contains lots of words in order to fill the width of the page successfully to check layout and so forth.'
              }
            ]
          },
          {
            title: "Second",
            contents: [
              {
                type: 'paragraph',
                text: 'You can group steps together like this.'
              },
            ]
          }
        ],
        [
          {
            title: "Third",
            contents: [
              {
                type: 'paragraph',
                text: 'This is yet another paragraph.'
              }
            ]
          }
        ]
      ]
  with_links:
    description: Links can be included with an optional parameter for if the link should be styled as active, and if a value for 'cost' should be shown after the link.
    data:
      groups: [
        [
          {
            title: "Example step containing links",
            contents: [
              {
                type: 'list',
                links: [
                  {
                    path: '/test1',
                    text: 'Link 1',
                  },
                  {
                    path: '/test2',
                    text: 'Link 2',
                    active: false,
                    cost: '&pound;50 to &pound;100'
                  }
                ]
              }
            ]
          }
        ],
        [
          {
            title: "Example step containing links and paragraphs",
            contents: [
              {
                type: 'paragraph',
                text: 'You can include paragraphs and links together in any order as required.'
              },
              {
                type: 'list',
                style: '',
                links: [
                  {
                    path: '/test3',
                    text: 'Link 3',
                  },
                  {
                    path: '/test4',
                    text: 'Link 4',
                    cost: '&pound;0 to &pound;300'
                  },
                  {
                    path: '/test5',
                    text: 'Link 5',
                  }
                ]
              },
              {
                type: 'paragraph',
                text: 'Like this.'
              }
            ]
          }
        ]
      ]
  with_optional_steps_and_sub_steps:
    description: Steps can be optional. Steps can also contain sub steps, which act either as a way to break up content or to indicate that some tasks are optional. Whenever a step or sub step is optional this should be made clear in the written content. Optional steps are styled differently but this should support the meaning, not convey it.
    data:
      groups: [
        [
          {
            title: "Example optional step",
            optional: true,
            contents: [
              {
                type: paragraph,
                text: 'This step is optional.'
              }
            ]
          },
          {
            title: "Example link with sub step",
            contents: [
              {
                type: 'paragraph',
                text: 'This step ends with a sub step.'
              },
              {
                type: 'substep',
                optional: false
              },
              {
                type: 'paragraph',
                text: 'This paragraph is inside the sub step.'
              },
              {
                type: 'list',
                links: [
                  {
                    path: '/test6',
                    text: 'This link is also inside the sub step'
                  }
                ]
              }
            ]
          }
        ],
        [
          {
            title: "Another example with a sub step",
            contents: [
              {
                type: 'paragraph',
                text: 'This example contains a sub step that contains optional tasks.'
              },
              {
                type: 'substep',
                optional: true
              },
              {
                type: 'paragraph',
                text: 'This paragraph is inside the sub step.'
              }
            ]
          }
        ]
      ]
  with_links_to_more_information:
    description: A task list in the side nav of a page can be overwhelmingly long. In these situations some content can be substituted with a link back to the main task list page. This link will include the value of the chosen step, so that the main task list page will open with that step shown. Note that this option does not remove any content - it is left to developers to simply pass less content to the component in this situation.
    data:
      task_list_url: "/learn-to-do-something"
      groups: [
        [
          {
            title: "A link back to the main task list",
            contents: [
              {
                type: 'list',
                links: [
                  {
                    path: '/test7',
                    text: 'This is a link'
                  },
                  {
                    path: '/test7',
                    text: 'This is another link'
                  }
                ]
              }
            ]
          }
        ],
        [
          {
            title: "Another link back to the main task list",
            contents: [
              {
                type: 'list',
                links: [
                  {
                    path: '/test7',
                    text: 'This is yet another link'
                  },
                  {
                    path: '/test7',
                    text: 'This is a further link'
                  },
                ]
              }
            ]
          }
        ]
      ]

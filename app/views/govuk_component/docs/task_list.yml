name: Task list
description: Numbered groups containing expanding/collapsing steps
body: |
  Task lists are designed to show a sequence of steps towards a specific goal, such as 'learning to drive'. Each group of a task list can contain one or more steps. Each step can contain one or more links to pages. User research suggested that each step should be collapsed by default so that users are not overwhelmed with information.

  If JavaScript is disabled the task list expands fully. All of the task list functionality (including the icons and aria attributes) are added using JavaScript.

  The task list is based on the accordion component in collections, but has been altered. This is for two reasons.

  - task lists are needed throughout GOV.UK and extending the accordion to be the task list would require promoting it to static, which would break integration testing
  - creating a new component allows further iteration without impacting the accordion

  Changes in the task list code that are different from the accordion:

  - functionality to 'remember' the last opened step in the URL is disabled by default
  - a step can be open by default
  - visual changes (see below)
accessibility_criteria: |
  The task list must:

  - indicate to users that each step can be expanded and collapsed
  - inform the user when a step has been expanded or collapsed
  - be usable with a keyboard
  - allow users to open or close all steps at once
  - inform the user which step a link belongs to
  - inform the user which step the current page is in, particularly where there are multiple steps in one group

  The open/close all button only needs to list the first panel id in the aria-controls attribute, rather than all of them.

  Step headings must use a button element:

  - so that steps can be toggled with the space and enter keys
  - so that steps can't be opened in a new tab or window

  When JavaScript is unavailable the task list must:

  - be fully expanded
  - not be marked as expandable
shared_accessibility_criteria:
  - link
examples:
  default:
    data:
      groups: [
        [
          {
            title: "Do a thing",
            contents: [
              {
                type: 'paragraph',
                text: 'This is a paragraph of text.'
              },
              {
                type: 'paragraph',
                text: 'This is also a paragraph of text that intentionally contains lots of words in order to fill the width of the page successfully to check layout and so forth.'
              }
            ]
          },
          {
            title: "Do another thing",
            contents: [
              {
                type: 'paragraph',
                text: 'Groups can contain multiple steps, like this.'
              },
            ]
          }
        ],
        [
          {
            title: "Do something else",
            contents: [
              {
                type: 'paragraph',
                text: 'This is yet another paragraph.'
              }
            ]
          }
        ]
      ]
  with_links:
    description: Links can be included with an optional parameter to style the parent list according to the type of link being shown. Links can also have a cost associated with them.
    data:
      groups: [
        [
          {
            title: 'Links and paragraphs',
            contents: [
              {
                type: 'paragraph',
                text: 'These links represent tasks that are required.'
              },
              {
                type: 'paragraph',
                text: 'Spacing between a paragraph and a list of links should be smaller than the spacing between two paragraphs, in order to visually connect the two.'
              },
              {
                type: 'list',
                style: 'required',
                links: [
                  {
                    path: '/test1',
                    text: 'Obtain a driving licence prior to driving a car',
                  },
                  {
                    path: '/test2',
                    text: 'Acquire food before attempting to cook',
                    cost: '1p to &pound;20'
                  }
                ]
              },
              {
                type: 'paragraph',
                text: 'These links represent tasks that are optional.'
              },
              {
                type: 'list',
                links: [
                  {
                    path: '/test3',
                    text: 'Learn to play the saxophone',
                  },
                  {
                    path: '/test4',
                    text: 'Develop a new method of extracting juice from oranges',
                    cost: '&pound;0 to &pound;300'
                  },
                  {
                    path: '/test5',
                    text: 'Buy a race car',
                  }
                ]
              },
              {
                type: 'paragraph',
                text: 'These links represent a choice:'
              },
              {
                type: 'list',
                style: 'choice',
                links: [
                  {
                    path: '/test3',
                    text: 'Leave school at sixteen',
                  },
                  {
                    path: '/test4',
                    text: 'Continue into higher education',
                    cost: '&pound;9,500'
                  }
                ]
              }
            ]
          }
        ]
      ]
  with_optional_steps:
    description: Steps can be optional. This is controlled by two parameters for maximum flexibility, 'optional' (which causes the step to have a dotted line down the side) and 'logic', which defaults to showing the word 'and' alongside the step title, but also accepts 'or'.
    data:
      groups: [
        [
          {
            title: "Drive to work",
            contents: [
              {
                type: paragraph,
                text: 'If you do not have a car, you will need to choose an alternative.'
              }
            ]
          },
          {
            title: "Walk to work",
            optional: true,
            logic: 'or',
            contents: [
              {
                type: 'paragraph',
                text: 'Walking is healthy but may not be practical where large distances are concerned.'
              }
            ]
          },
          {
            title: "Get public transport to work",
            optional: true,
            logic: 'or',
            contents: [
              {
                type: 'paragraph',
                text: 'Public transport includes buses, trains and boats.'
              }
            ]
          }
        ],
        [
          {
            title: "Do work",
            contents: [
              {
                type: 'paragraph',
                text: 'Once you have reached your destination you should be able to start work.'
              }
            ]
          },
          {
            title: "Get paid",
            contents: [
              {
                type: 'paragraph',
                text: 'Your employer should pay you for hours worked.'
              }
            ]
          }
        ]
      ]
  with_sub_steps:
    description: Steps can also contain sub steps, which act either as a way to break up content or to indicate that some tasks are optional. Whenever a step or sub step is optional this should be made clear in the written content. Optional steps are styled differently but this should support the meaning, not convey it.
    data:
      groups: [
        [
          {
            title: "A required step",
            contents: [
              {
                type: 'paragraph',
                text: 'This step ends with an optional sub step.'
              },
              {
                type: 'substep',
                optional: true
              },
              {
                type: 'paragraph',
                text: 'This paragraph is inside the sub step.'
              },
              {
                type: 'list',
                links: [
                  {
                    path: '/test6',
                    text: 'This link is also inside the sub step'
                  }
                ]
              }
            ]
          }
        ],
        [
          {
            title: "An optional step",
            optional: true,
            contents: [
              {
                type: 'paragraph',
                text: 'This optional step contains multiple sub steps.'
              },
              {
                type: 'substep',
                optional: false
              },
              {
                type: 'paragraph',
                text: 'This paragraph is inside a required sub step.'
              },
              {
                type: 'substep',
                optional: true
              },
              {
                type: 'paragraph',
                text: 'This paragraph is inside an optional sub step.'
              },
              {
                type: 'substep',
                optional: false
              },
              {
                type: 'paragraph',
                text: 'This paragraph is inside a required sub step.'
              }
            ]
          }
        ],
        [
          {
            title: "Another required step",
            contents: [
              {
                type: 'paragraph',
                text: 'Um. Hello.'
              }
            ]
          }
        ]
      ]
  with_links_to_more_information:
    description: A task list in the side nav of a page can be overwhelmingly long. In these situations some content can be substituted with a link back to the main task list page. This link will include the value of the chosen step, so that the main task list page will open with that step shown. Note that this option does not remove any content - it is left to developers to simply pass less content to the component in this situation.
    data:
      task_list_url: "/learn-to-do-something"
      groups: [
        [
          {
            title: "A link back to the main task list",
            contents: [
              {
                type: 'list',
                links: [
                  {
                    path: '/test7',
                    text: 'This is a link'
                  },
                  {
                    path: '/test7',
                    text: 'This is another link'
                  }
                ]
              }
            ]
          }
        ],
        [
          {
            title: "Another link back to the main task list",
            contents: [
              {
                type: 'list',
                links: [
                  {
                    path: '/test7',
                    text: 'This is yet another link'
                  },
                  {
                    path: '/test7',
                    text: 'This is a further link'
                  },
                ]
              }
            ]
          }
        ]
      ]
  test_all_the_things:
    description: This component is very complicated so here is an example containing as many of the options available as possible.
    data:
      task_list_url: "/learn-to-setup-standup"
      groups: [
        [
          {
            title: 'Get the TV ready',
            contents: [
              {
                type: 'paragraph',
                text: 'Configure the television so it is ready for the standup. You will also need a laptop.'
              },
              {
                type: 'list',
                style: 'required',
                links: [
                  {
                    path: 'https://en.wikipedia.org/wiki/HDMI',
                    text: 'Remove the Chromebit from HDMI 1 on the TV'
                  }
                ]
              }
            ]
          },
          {
            title: 'Plug everything in',
            contents: [
              {
                type: 'paragraph',
                text: 'Connect the relevant cables between the various devices.'
              },
              {
                type: 'list',
                style: 'required',
                links: [
                  {
                    path: 'https://www.google.co.uk/search?q=mini+dvi&rlz=1C5CHFA_enGB754GB756&source=lnms&tbm=isch&sa=X&ved=0ahUKEwiU_8Pt9N7XAhUpLcAKHY-uBJQQ_AUICigB&biw=1745&bih=894',
                    text: 'Run the HDMI - MINI DVI cable from the TV to the facilitators laptop'
                  },
                  {
                    path: 'https://www.jabra.co.uk/',
                    text: 'Plug the Jabra into the facilitators laptop'
                  }
                ]
              }
            ]
          }
        ],
        [
          {
            title: 'Configure the catchbox',
            contents: [
              {
                type: 'paragraph',
                text: 'These steps are required.'
              },
              {
                type: 'list',
                style: 'required',
                links: [
                  {
                    path: '',
                    text: 'Ensure the catchbox transmitter is plugged in at the mains wall'
                  },
                  {
                    path: '',
                    text: 'Turn on the transmitter and wait for the switch to blink green'
                  },
                  {
                    path: '',
                    text: 'Plug the transmitter USB cable into the facilitators laptop'
                  },
                  {
                    path: '',
                    text: 'Twist and pull the black piece of foam out of the catchbox'
                  },
                  {
                    path: '',
                    text: 'Turn on the catchbox and wait for the LED to turn green'
                  },
                  {
                    path: '',
                    text: 'Wait for the transmitter light to turn solid green'
                  }
                ]
              },
              {
                type: 'substep',
                optional: true
              },
              {
                type: 'paragraph',
                text: 'These steps are not required.'
              },
              {
                type: 'list',
                style: 'choice',
                links: [
                  {
                    path: '',
                    text: "Get annoyed when it doesn't work"
                  },
                  {
                    path: '',
                    text: 'Try to find someone else who knows how to do it'
                  }
                ]
              }
            ]
          }
        ],
        [
          {
            title: 'Join and configure the standup',
            contents: [
              {
                type: 'paragraph',
                text: 'Connect to standup hangout via the calendar invite'
              },
              {
                type: 'paragraph',
                text: 'Click the three dots in the bottom hand corner to open settings'
              },
              {
                type: 'paragraph',
                text: 'Set speaker to "Jabra"'
              },
              {
                type: 'paragraph',
                text: 'Set microphone to "C Media USB"'
              },
              {
                type: 'paragraph',
                text: 'Click "present to meeting"'
              }
            ]
          }
        ],
        [
          {
            title: 'Clear up',
            contents: [
              {
                type: 'paragraph',
                text: 'Undo all the things'
              }
            ]
          },
          {
            title: 'Get someone else to clear up',
            logic: 'or',
            optional: true,
            contents: [
              {
                type: 'paragraph',
                text: 'Schedule another meeting for right after the standup and force someone else to sort everything out.'
              }
            ]
          }
        ]
      ]

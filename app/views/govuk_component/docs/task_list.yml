name: Task list
description: Numbered groups containing expanding/collapsing steps
body: |
  Task lists are designed to show a sequence of steps towards a specific goal, such as 'learning to drive'. Each group of a task list can contain one or more steps. Each step can contain one or more links to pages. User research suggested that each step should be collapsed by default so that users are not overwhelmed with information.

  If JavaScript is disabled the task list expands fully. All of the task list functionality (including the icons and aria attributes) are added using JavaScript.

  The task list is based on the accordion component in collections, but has been altered. This is for two reasons.

  - task lists are needed throughout GOV.UK and extending the accordion to be the task list would require promoting it to static, which would break integration testing
  - creating a new component allows further iteration without impacting the accordion

  Changes in the task list code that are different from the accordion:

  - functionality to 'remember' the last opened step in the URL is disabled by default
  - a step can be open by default
  - visual changes (see below) including plus/minus control being on the left, not the right
accessibility_criteria: |
  The task list must:

  - indicate to users that each step can be expanded and collapsed
  - inform the user when a step has been expanded or collapsed
  - be usable with a keyboard
  - allow users to open or close all steps at once
  - inform the user which step a link belongs to
  - inform the user which step the current page is in, particularly where there are multiple steps in one group

  The open/close all button only needs to list the first panel id in the aria-controls attribute, rather than all of them.

  Step headings must use a button element:

  - so that steps can be toggled with the space and enter keys
  - so that steps can't be opened in a new tab or window

  When JavaScript is unavailable the task list must:

  - be fully expanded
  - not be marked as expandable
shared_accessibility_criteria:
  - link
examples:
  default:
    data:
      groups: [
        [
          {
            title: 'First header',
            panel: 'First panel'
          }
        ],
        [
          {
            title: 'Second header',
            panel: 'Second panel'
          }
        ],
        [
          {
            title: 'Third header lets see how long we can make this and what that does to the layout of this component',
            panel: 'Third panel also containing some deliberately long content to show what happens if long content is included and the response the component has to it.'
          }
        ]
      ]
  with_custom_step_ids:
    description: IDs for steps are automatically generated based on the step title, but can also be passed manually. Passed IDs are converted to lowercase and have spaces replaced with hyphens.
    data:
      groups: [
        [
          {
            title: 'First header',
            id: 'something1',
            panel: 'First panel'
          }
        ],
        [
          {
            title: 'Second header',
            id: 'something2',
            panel: 'Second panel'
          }
        ]
      ]
  with_different_heading_level:
    description: Sections have a H2 by default, but this can be changed. The heading level does not change any styling.
    data:
      heading_level: 3
      groups: [
        [
          {
            title: 'This is a heading 3',
            panel: '<p>Some content</p>'
          }
        ],
        [
          {
            title: 'This is also a heading 3',
            panel: 'Some more content'
          }
        ]
      ]
  open_a_step_by_default:
    description: Pass the index of the step to open by default. This is the nth step, regardless of group number.
    data:
      open_step: 3
      groups: [
        [
          {
            title: 'Closed by default',
            panel: 'Well, open now, obviously.'
          }
        ],
        [
          {
            title: 'Also closed by default',
            panel: 'Hello.'
          },
          {
            title: 'Open by default',
            panel: 'Hello!'
          }
        ]
      ]
  remember_last_opened_step:
    description: If a step is opened its ID is appended to the end of the URL, so that if the URL is shared or the 'back' button is used, that step will be opened on page load. This was historically part of the behaviour of the accordion. By default this is turned off and cannot be used together with the option to open a step by default.
    data:
      remember_last_step: true
      groups: [
        [
          {
            title: 'Remember this',
            panel: 'Panel content'
          }
        ],
        [
          {
            title: 'Or this',
            panel: 'More panel content'
          }
        ]
      ]
  with_multiple_steps_in_one_group:
    description: Some task lists contain non-sequential steps that can be combined into a single group, but kept as separate steps.
    data:
      groups: [
        [
          {
            title: 'First group first step header',
            panel: 'First group first step panel'
          }
        ],
        [
          {
            title: 'Second group first step header',
            panel: 'Second group first step panel'
          },
          {
            title: 'Second group second step header',
            panel: 'Second group second step panel'
          }
        ],
        [
          {
            title: 'Third group first step header',
            panel: 'Third group first step panel'
          },
          {
            title: 'Third group second step header',
            panel: 'Third group second step panel'
          },
          {
            title: 'Third group third step header',
            panel: 'Third group third step panel'
          }
        ]
      ]
  with_panel_descriptions:
    description: Panels can have paragraphs added into them that are styled by the component.
    data:
      groups: [
        [
          {
            title: 'Panel descriptions 1',
            panel_descriptions: [
              'This is a panel description.',
              'This is also a panel description. It has been filled with words such as CONTENT and ACCORDION in order to fill the horizontal space and wrap onto a second line.'
            ]
          }
        ],
        [
          {
            title: 'Panel descriptions 2',
            panel: 'You can also insert non-component specific content as before.',
            panel_descriptions: [
              'This is the panel description.'
            ]
          }
        ]
      ]
  with_styled_lists:
    description: Panels can contain lists of links that are styled by the component. A link can be marked as 'active', which will visually highlight the step and the link itself. Appropriate aria attributes are added and the active link will be rendered as a link to the top of the page content (this link may not work in the component guide).
    data:
      groups: [
        [
          {
            title: 'Panel links',
            panel_links: [
              {
                href: '/link1',
                text: 'Link 1'
              },
              {
                href: '/link2',
                text: 'Link 2',
                active: true
              },
              {
                href: '/link3',
                text: 'Link 3'
              }
            ]
          }
        ],
        [
          {
            title: 'More panel links',
            panel_links: [
              {
                href: '/link4',
                text: 'Link 4'
              },
              {
                href: '/link5',
                text: 'Link 5',
              },
              {
                href: '/link6',
                text: 'Link 6'
              }
            ]
          }
        ]
      ]
  with_styled_lists_in_steps_with_multiple_groups:
    description: If a link in a step is marked as active, the entire group is highlighted.
    data:
      groups: [
        [
          {
            title: 'Panel links 1',
            panel: 'You can also insert non-component specific content as before.',
            panel_descriptions: [
              'You can also insert panel descriptions as before.'
            ]
          }
        ],
        [
          {
            title: 'Panel links 2',
            panel_descriptions: [
              'This is a panel description'
            ],
            panel_links: [
              {
                href: '/link1',
                text: 'Link 1'
              },
              {
                href: '/link2',
                text: 'Link 2'
              },
              {
                href: '/link3',
                text: 'Link 3',
                active: true
              },
              {
                href: '/link4',
                text: 'Link 4'
              }
            ]
          },
          {
            title: 'Panel links 3',
            panel_links: [
              {
                href: '/link5',
                text: 'Link 5'
              },
              {
                href: '/link6',
                text: 'Link 6'
              }
            ]
          }
        ]
      ]
  small:
    description: Designed to fit in a smaller space, specifically the sidebar of a page.
    data:
      small: true
      groups: [
        [
          {
            title: 'Small header 1',
            panel: 'First panel'
          }
        ],
        [
          {
            title: 'Small header 2',
            panel: 'Second panel'
          },
          {
            title: 'Small header 3',
            panel: 'Third panel'
          }
        ],
        [
          {
            title: 'Small header 4',
            panel: 'Fourth panel'
          }
        ]
      ]
  small_with_styled_lists:
    description: The intended use of 'active' task list items is in small task lists.
    data:
      small: true
      groups: [
        [
          {
            title: 'Small panel links 1',
            panel: 'You can also insert non-component specific content as before.',
            panel_descriptions: [
              'You can also insert panel descriptions as before.'
            ]
          }
        ],
        [
          {
            title: 'Small panel links 2',
            panel_descriptions: [
              'This is a panel description.',
              'This is also a panel description. It has been filled with words such as CONTENT and ACCORDION in order to fill the horizontal space and wrap onto a second line.'
            ],
            panel_links: [
              {
                href: '/link1',
                text: 'Link 1',
                active: true
              },
              {
                href: '/link2',
                text: 'Link 2'
              }
            ]
          }
        ],
        [
          {
            title: 'Small panel links 3',
            panel: 'content',
            panel_links: [
              {
                href: '/link3',
                text: 'Link 3'
              },
              {
                href: '/link4',
                text: 'Link 4'
              },
              {
                href: '/link5',
                text: 'Link 5'
              }
            ]
          }
        ]
      ]
